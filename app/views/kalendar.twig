{% extends "templates/app.twig" %} {% block stil %}
<link href="{{ base_url() }}/css/fullcalendar.css" rel="stylesheet" />
<link href="{{ base_url() }}/css/fullcalendar.print.css" rel="stylesheet" media="print" />
<style>
  .fc-day-grid-event:hover {
    background-color: #ffc107 !important;
    cursor: pointer;
  }
  a.fc-day-number {
    margin: 0.2rem;
    border-radius: 50%;
    text-decoration: none !important;
    width: 2rem;
    height: 2rem;
    line-height: 2rem;
    text-align: center;
    background-color: #6c757d;
    color: #ffffff;
  }
  a.fc-day-number:hover {
    background-color: #ffc107;
  }
</style>
{% endblock stil %} {% block naslov %}
<div class="row mt-md-5">
  <div class="col">
    <h1>
      <i class="fas fa-calendar-check text-secondary"></i> Pregled zakazanih termina</h1>
    </h1>
  </div>
  <div class="col">
    <ul class="list-inline lead pt-3 mb-0">
      <li class="list-inline-item ml-4">
        <i class="fas fa-calendar-plus text-danger"></i> Termin u pripremi
      </li>
      <li class="list-inline-item ml-4">
        <i class="fas fa-calendar-check text-success"></i> Zaključen termin
      </li>
    </ul>
  </div>
</div>
<hr />

<div class="row">
  <div class="col-md-12" id="kalendar"></div>
</div>
{% endblock naslov %} {% block skripta %}
<script src="{{ base_url() }}/js/moment.min.js"></script>
<script src="{{ base_url() }}/js/fullcalendar.min.js"></script>
<script src="{{ base_url() }}/js/sr.js"></script>

<script>

    $(document).ready(function() {

$("#kalendar").fullCalendar({
      themeSystem: "bootstrap4",
      customButtons: {
        myCustomButton: {
          text: "Štampaj",
          click: function() {
            window.print();
          }
        }
      },
      header: {
        left: "prev,next today myCustomButton",
        center: "title",
        right: "month,agendaWeek,agendaDay,listDay"
      },
      defaultView: "month",
      weekends: true,
      height: 750,
      events: JSON.parse(`{{ data|raw }}`),
      slotEventOverlap:false,
      slotDuration:'01:00:00',
      minTime:'07:00:00',
      eventBackgroundColor: "#f8f9fa",
      eventBorderColor: "#000000",
      eventTextColor: "#000000",
      eventRender: function (event, element, view) {
        if (view.name == "listDay")
  {
     element.find('.fc-list-item-title').html(`<p>${event.advancedTitle}</p>`);
  }
        if (view.name == "month"){
            let title = element.find(".fc-title");
            element.find('.fc-time').hide();
            const html = `
            <div class="clearfix">
              <div class="d-none d-sm-flex float-left text-wrap">
                ${event.start.format("HH:mm")} ${event.end.format("HH:mm")}
              </div>
              <div class="d-sm-none float-left text-wrap">
                <small>${event.start.format("HH:mm")} ${event.end.format("HH:mm")}</small>
              </div>
              <div class="d-none d-sm-flex float-right">
                <i class="${event.description}"></i>
              </div>
            </div>
            <div class="d-none d-sm-flex text-wrap">
              ${event.title}
            </div>
            <div class="d-sm-none text-wrap text-truncate">
              <small><strong>${event.title}</strong></small>
            </div>
            <div class="d-sm-none float-right">
                <i class="${event.description}"></i>
            </div>
            `;
            title.html(html);
            element.addClass("p-1");}
        },
      dayNames: ["nedelja", "ponedeljak", "utorak", "sreda", "četvrtak", "petak", "subota"],
      dayNamesShort: ["nedelja", "ponedeljak", "utorak", "sreda", "četvrtak", "petak", "subota"],
      monthNames: [
        "januar",
        "februar",
        "mart",
        "april",
        "maj",
        "jun",
        "jul",
        "avgust",
        "septembar",
        "oktobar",
        "novembar",
        "decembar"
      ],
      monthNamesShort: [
        "januar",
        "februar",
        "mart",
        "april",
        "maj",
        "jun",
        "jul",
        "avgust",
        "septembar",
        "oktobar",
        "novembar",
        "decembar"
      ],
      dayClick: function(date, jsEvent, view) {}
    });
  });
</script>
{% endblock skripta %}
